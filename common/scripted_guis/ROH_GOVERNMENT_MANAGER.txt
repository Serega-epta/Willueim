scripted_gui = {
	government_manager_handler = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "government_manager_handler"
		effects = {
			government_manager_toggle_click = {
				if = {
					limit = {
						has_variable = gos_usroistvo
					} 
					clear_variable = gos_usroistvo
				}
				else = {
					set_variable = {
						gos_usroistvo = 0 
					}
				}
			}
		}
	}
	Okno_gosustroistva = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "government_manager_container"
		visible = {
			has_variable = gos_usroistvo
		}	
		triggers = {		
			BUTTON_Open_okno_military_system_click_enabled = {
				OR = {
					check_variable = { selected_government_system = 1 }
					check_variable = { selected_government_system = 0 }
				}
			}
			BUTTON_Open_okno_civil_system_click_enabled = {
				OR = {
					check_variable = { selected_government_system = 2 }
					check_variable = { selected_government_system = 0 }
				}
			}
			BUTTON_Open_okno_ststegos_system_click_enabled = {
				OR = {
					check_variable = { selected_government_system = 3 }
					check_variable = { selected_government_system = 0 }
				}
			}
		}
		effects = {	
			BUTTON_Open_okno_military_system_click = {	
				if = {
					limit = { 
						check_variable = {
							gos_usroistvo = 1 
						}
					}
					set_variable = { 
						gos_usroistvo = 0
					}
				}
				else = {
					set_variable = {
						gos_usroistvo = 1 
					}
				}	
			}			
			BUTTON_Open_okno_civil_system_click = {	
				if = {
					limit = { 
						check_variable = { 
							gos_usroistvo = 2 
						}
					}
					set_variable = { 
						gos_usroistvo = 0
					}
				}
				else = {
					set_variable = {
						gos_usroistvo = 2 
					}
				}	
			}						
			BUTTON_Open_okno_ststegos_system_click = {	
				if = {
					limit = { 
						check_variable = { 
							gos_usroistvo = 3 
						}
					}
					set_variable = { 
						gos_usroistvo = 0
					}
				}
				else = {
					set_variable = {
						gos_usroistvo = 3 
					}
				}	
			}				
		}
	}
	#vars: ochki_gos_progressa
	menshikov_system_tree = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "menshikov_system_outer_handler"
		visible = {
			check_variable = { 
				gos_usroistvo = 1 
			}
		}		
		triggers = {
			select_model_button_visible = {
				NOT = {
					check_variable = {
						selected_government_system = 1
					}
				}
			}
			materials_science_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = materials_science_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			dense_layout_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = dense_layout_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			lower_streams_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = lower_streams_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			upper_streams_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = upper_streams_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			our_future_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = our_future_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			vocational_technical_schools_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = vocational_technical_schools_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			working_faculties_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = working_faculties_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			labor_veterans_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = labor_veterans_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			labor_heros_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = labor_heros_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			industrial_cooperation_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = industrial_cooperation_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			constructed_for_life_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = constructed_for_life_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			love_thy_neighbour_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = love_thy_neighbour_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			local_wing_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = local_wing_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			strict_regulations_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = strict_regulations_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			flexible_regulations_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = flexible_regulations_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			gardening_partnerships_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = gardening_partnerships_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			rural_units_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = rural_units_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			adversarial_law_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = adversarial_law_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			fair_competition_codex_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = fair_competition_codex_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			outsourcing_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = outsourcing_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			trade_initiative_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = trade_initiative_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			GOST_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = GOST_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			fullstack_consumtion_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = fullstack_consumtion_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
			humanism_stronghold_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = humanism_stronghold_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					goverment_system_can_be_upgraded = yes
					#to do dependencies for upgrade
				}
			}
		}
		effects = {		
			select_model_button_click = {
				#tooltips to do
				set_variable = {
					selected_government_system = 1
				}
				remove_ideas_with_trait = smoilov_system_trait
				remove_ideas_with_trait = naumov_system_trait
			}
			close_button_click = {
				set_variable = {
					gos_usroistvo = 0
				}
			}
			materials_science_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = materials_science_idea
							NOT = {
								check_variable = {
									selected_government_system = 1
								}
							}
						}
					}
					custom_effect_tooltip = materials_science_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = materials_science_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = materials_science_available_tt
				}
			}
			dense_layout_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = dense_layout_idea
							NOT = {
								check_variable = {
									selected_government_system = 1
								}
							}
						}
					}
					custom_effect_tooltip = dense_layout_used_tt
					add_political_power = 1
				}
				else = {
					hidden_effect = {
						add_ideas = dense_layout_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = dense_layout_available_tt
				}
			}
			lower_streams_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = lower_streams_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = lower_streams_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = lower_streams_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = lower_streams_available_tt
				}
			}
			upper_streams_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = upper_streams_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = upper_streams_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = upper_streams_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = upper_streams_available_tt
				}
			}
			our_future_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = our_future_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = our_future_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = our_future_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = our_future_available_tt
				}
			}
			vocational_technical_schools_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = vocational_technical_schools_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = vocational_technical_schools_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = vocational_technical_schools_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = vocational_technical_schools_available_tt
				}
			}
			working_faculties_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = working_faculties_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = working_faculties_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = working_faculties_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = working_faculties_available_tt
				}
			}
			labor_veterans_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = labor_veterans_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = labor_veterans_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = labor_veterans_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = labor_veterans_available_tt
				}
			}
			labor_heros_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = labor_heros_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = labor_heros_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = labor_heros_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = labor_heros_available_tt
				}
			}
			industrial_cooperation_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = industrial_cooperation_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = industrial_cooperation_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = industrial_cooperation_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = industrial_cooperation_available_tt
				}
			}
			constructed_for_life_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = constructed_for_life_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = constructed_for_life_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = constructed_for_life_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = constructed_for_life_available_tt
				}
			}
			love_thy_neighbour_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = love_thy_neighbour_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = love_thy_neighbour_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = love_thy_neighbour_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = love_thy_neighbour_available_tt
				}
			}
			local_wing_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = local_wing_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = local_wing_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = local_wing_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = local_wing_available_tt
				}
			}
			strict_regulations_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = strict_regulations_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = strict_regulations_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = strict_regulations_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = strict_regulations_available_tt
				}
			}
			flexible_regulations_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = flexible_regulations_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = flexible_regulations_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = flexible_regulations_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = flexible_regulations_available_tt
				}
			}
			gardening_partnerships_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = gardening_partnerships_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = gardening_partnerships_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = gardening_partnerships_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = gardening_partnerships_available_tt
				}
			}
			rural_units_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = rural_units_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = rural_units_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = rural_units_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = rural_units_available_tt
				}
			}
			adversarial_law_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = adversarial_law_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = adversarial_law_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = adversarial_law_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = adversarial_law_available_tt
				}
			}
			fair_competition_codex_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = fair_competition_codex_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = fair_competition_codex_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = fair_competition_codex_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = fair_competition_codex_available_tt
				}
			}
			outsourcing_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = outsourcing_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = outsourcing_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = outsourcing_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = outsourcing_available_tt
				}
			}
			trade_initiative_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = trade_initiative_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = trade_initiative_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = trade_initiative_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = trade_initiative_available_tt
				}
			}
			GOST_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = GOST_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = GOST_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = GOST_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = GOST_available_tt
				}
			}
			fullstack_consumtion_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = fullstack_consumtion_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = fullstack_consumtion_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = fullstack_consumtion_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = fullstack_consumtion_available_tt
				}
			}
			humanism_stronghold_button_click = {
				if = {
					limit = {
						OR = {
							has_idea = humanism_stronghold_idea
							check_variable = {
								selected_government_system = 0
							}
						}
					}
					custom_effect_tooltip = humanism_stronghold_used_tt
				}
				else = {
					hidden_effect = {
						add_ideas = humanism_stronghold_idea
					}
					use_goverment_upgrade = yes
					custom_effect_tooltip = humanism_stronghold_available_tt
				}
			}
		}
	}
	smoilov_system_tree = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "smoilov_system_outer_handler"
		visible = {
			check_variable = { 
				gos_usroistvo = 2 
			}
		}		
		triggers = {
			select_model_button_visible = {
				NOT = {
					check_variable = {
						selected_government_system = 2
					}
				}
			}
		}
		effects = {
			select_model_button_click = {
				#tooltips to do
				set_variable = {
					selected_government_system = 2
				}
				remove_ideas_with_trait = menshikov_system_trait
				remove_ideas_with_trait = naumov_system_trait
			}
			close_button_click = {
				set_variable = {
					gos_usroistvo = 0
				}
			}
		}
	}
	naumov_system_tree = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "naumov_system_outer_handler"
		visible = {
			check_variable = { 
				gos_usroistvo = 3
			}
		}		
		triggers = {			
			select_model_button_visible = {
				NOT = {
					check_variable = {
						selected_government_system = 3
					}
				}
			}
		}
		effects = {		
			select_model_button_click = {
				#tooltips to do
				set_variable = {
					selected_government_system = 3
				}
				remove_ideas_with_trait = menshikov_system_trait
				remove_ideas_with_trait = naumov_system_trait
			}
			close_button_click = {
				set_variable = {
					gos_usroistvo = 0
				}
			}
		}
	}
}