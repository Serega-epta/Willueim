#By Pasha-2033
@select_model_min_population_k = 100
scripted_gui = {
	Okno_gosustroistva = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "government_manager_container"
		triggers = {		
			BUTTON_Open_okno_military_system_click_enabled = {
				OR = {
					check_variable = { selected_government_system = 1 }
					check_variable = { selected_government_system = 0 }
				}
			}
			BUTTON_Open_okno_civil_system_click_enabled = {
				OR = {
					check_variable = { selected_government_system = 2 }
					check_variable = { selected_government_system = 0 }
				}
			}
			BUTTON_Open_okno_ststegos_system_click_enabled = {
				OR = {
					check_variable = { selected_government_system = 3 }
					check_variable = { selected_government_system = 0 }
				}
			}
		}
		effects = {	
			BUTTON_Open_okno_military_system_click = {	
				if = {
					limit = { 
						check_variable = {
							gos_usroistvo = 1 
						}
					}
					set_variable = { 
						gos_usroistvo = 0
					}
				}
				else = {
					set_variable = {
						gos_usroistvo = 1 
					}
				}	
			}			
			BUTTON_Open_okno_civil_system_click = {	
				if = {
					limit = { 
						check_variable = { 
							gos_usroistvo = 2 
						}
					}
					set_variable = { 
						gos_usroistvo = 0
					}
				}
				else = {
					set_variable = {
						gos_usroistvo = 2 
					}
				}	
			}	
			BUTTON_Open_okno_ststegos_system_click = {	
				if = {
					limit = { 
						check_variable = { 
							gos_usroistvo = 3 
						}
					}
					set_variable = { 
						gos_usroistvo = 0
					}
				}
				else = {
					set_variable = {
						gos_usroistvo = 3 
					}
				}	
			}				
		}
		ai_enabled = {
			always = yes
		}
		ai_test_interval = 168
		ai_test_variance = 0
		ai_max_weight_taken_per_test = 1
		ai_weights = {
			BUTTON_Open_okno_military_system_click = {
				ai_will_do = {
					base = 0
					modifier = {
						#open desired ideology menu
						OR = {
							has_government = free_people
							has_government = technocracy
							has_government = humanists
						}
						add = 100
					}
					modifier = {
						#don`t close menu if already selected
						check_variable = { 
							gos_usroistvo = 1
						}
						factor = 0
					}
				}
			}
			BUTTON_Open_okno_civil_system_click = {
				ai_will_do = {
					base = 0
					modifier = {
						#open desired ideology menu
						OR = {
							has_government = statesmen
							has_government = militarists
							has_government = bandits
						}
						add = 100
					}
					modifier = {
						#don`t close menu if already selected
						check_variable = { 
							gos_usroistvo = 2
						}
						factor = 0
					}
				}
			}
			BUTTON_Open_okno_ststegos_system_click = {
				ai_will_do = {
					base = 0
					modifier = {
						#open desired ideology menu
						OR = {
							has_government = chthonism
							has_government = sacraments
						}
						add = 100
					}
					modifier = {
						#don`t close menu if already selected
						check_variable = { 
							gos_usroistvo = 3
						}
						factor = 0
					}
				}
			}
		}
	}
	#vars: min_reform_points_required
	government_manager_selection_possible_alert = {
		context_type = player_context
		parent_window_token = top_bar
		window_name = "government_manager_selection_possible_alert"
		triggers = {
			select_model_alert_visible = {
				set_temp_variable = {
					reform_points_for_upgrade = 20
				}
				goverment_system_can_be_upgraded = yes
				check_variable = {
					max_manpower_k > @select_model_min_population_k
				}
				check_variable = {
					selected_government_system = 0
				}
			}
			upgrade_model_alert_visible = {
				check_variable = {
					var = reform_points
					value = min_reform_points_required
					compare = greater_than_or_equals
				}
			}
		}
	}
	#vars: reform_points
	menshikov_system_tree = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "menshikov_system_outer_handler"
		visible = {
			check_variable = { 
				gos_usroistvo = 1 
			}
		}		
		triggers = {
			select_model_button_visible = {
				NOT = {
					check_variable = {
						selected_government_system = 1
					}
				}
			}
			select_model_button_click_enabled = {
				set_temp_variable = {
					reform_points_for_upgrade = 20
				}
				goverment_system_can_be_upgraded = yes
				custom_override_tooltip = {
					tooltip = {
						localization_key = population_k_required_tt
						NUM = {
							localization_key = @select_model_min_population_k
						}
					}
					check_variable = {
						max_manpower_k > @select_model_min_population_k
					}
				}
			}
			materials_science_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = materials_science_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 15
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = dense_layout_idea
					}
				}
			}
			dense_layout_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = dense_layout_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = materials_science_idea
					}
				}
			}
			lower_streams_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = lower_streams_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = materials_science_idea
				}
			}
			upper_streams_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = upper_streams_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = dense_layout_idea
				}
			}
			our_future_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = our_future_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = lower_streams_idea
						has_idea = upper_streams_idea
					}
				}
			}
			vocational_technical_schools_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = vocational_technical_schools_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = our_future_idea
					NOT = {
						has_idea = working_faculties_idea
					}
				}
			}
			working_faculties_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = working_faculties_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = our_future_idea
					NOT = {
						has_idea = vocational_technical_schools_idea
					}
				}
			}
			labor_veterans_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = labor_veterans_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = vocational_technical_schools_idea
				}
			}
			labor_heros_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = labor_heros_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = working_faculties_idea
				}
			}
			industrial_cooperation_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = industrial_cooperation_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = vocational_technical_schools_idea
						has_idea = working_faculties_idea
					}
				}
			}
			constructed_for_life_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = constructed_for_life_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = industrial_cooperation_idea
				}
			}
			love_thy_neighbour_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = love_thy_neighbour_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = industrial_cooperation_idea
				}
			}
			local_wing_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = local_wing_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = industrial_cooperation_idea
					any_controlled_state = {
						is_owned_by = ROOT
					}
				}
			}
			strict_regulations_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = strict_regulations_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = constructed_for_life_idea
					has_idea = industrial_cooperation_idea
					has_idea = local_wing_idea
					NOT = {
						has_idea = flexible_regulations_idea
					}
				}
			}
			flexible_regulations_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = flexible_regulations_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = constructed_for_life_idea
					has_idea = industrial_cooperation_idea
					has_idea = local_wing_idea
					NOT = {
						has_idea = strict_regulations_idea
					}
				}
			}
			gardening_partnerships_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = gardening_partnerships_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = flexible_regulations_idea
						has_idea = strict_regulations_idea
					}
					NOT = {
						has_idea = rural_units_idea
					}
				}
			}
			rural_units_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = rural_units_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 45
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = flexible_regulations_idea
						has_idea = strict_regulations_idea
					}
					NOT = {
						has_idea = gardening_partnerships_idea
					}
					any_controlled_state = {
						is_owned_by = ROOT
					}
				}
			}
			adversarial_law_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = adversarial_law_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = gardening_partnerships_idea
						has_idea = rural_units_idea
					}
					NOT = {
						has_idea = fair_competition_codex_idea
					}
				}
			}
			fair_competition_codex_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = fair_competition_codex_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = gardening_partnerships_idea
						has_idea = rural_units_idea
					}
					NOT = {
						has_idea = adversarial_law_idea
					}
				}
			}
			outsourcing_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = outsourcing_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = adversarial_law_idea
						has_idea = fair_competition_codex_idea
					}
				}
			}
			trade_initiative_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = trade_initiative_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 45
					}
					goverment_system_can_be_upgraded = yes
					has_idea = outsourcing_idea
				}
			}
			GOST_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = GOST_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 60
					}
					goverment_system_can_be_upgraded = yes
					has_idea = outsourcing_idea
				}
			}
			fullstack_consumtion_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = fullstack_consumtion_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 60
					}
					goverment_system_can_be_upgraded = yes
					has_idea = outsourcing_idea
				}
			}
			humanism_stronghold_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = humanism_stronghold_idea
						}
						check_variable = {
							selected_government_system = 1
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 90
					}
					goverment_system_can_be_upgraded = yes
					has_idea = trade_initiative_idea
					has_idea = GOST_idea
					has_idea = fullstack_consumtion_idea
				}
			}
			materials_science_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = materials_science_idea
					has_idea = dense_layout_idea
				}
			}
			dense_layout_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = dense_layout_idea
					has_idea = materials_science_idea
				}
			}
			lower_streams_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = lower_streams_idea
				}
				has_idea = materials_science_idea
			}
			upper_streams_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = upper_streams_idea
				}
				has_idea = dense_layout_idea
			}
			our_future_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = our_future_idea
				}
				OR = {
					has_idea = lower_streams_idea
					has_idea = upper_streams_idea
				}
			}
			vocational_technical_schools_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = working_faculties_idea
					has_idea = vocational_technical_schools_idea
				}
				has_idea = our_future_idea
			}
			working_faculties_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = working_faculties_idea
					has_idea = vocational_technical_schools_idea
				}
				has_idea = our_future_idea
			}
			labor_veterans_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = labor_veterans_idea
				}
				has_idea = vocational_technical_schools_idea
			}
			labor_heros_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = labor_heros_idea
				}
				has_idea = working_faculties_idea
			}
			industrial_cooperation_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = industrial_cooperation_idea
				}
				OR = {
					has_idea = labor_veterans_idea
					has_idea = labor_heros_idea
				}
			}
			constructed_for_life_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = constructed_for_life_idea
				}
				has_idea = industrial_cooperation_idea
			}
			love_thy_neighbour_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = love_thy_neighbour_idea
				}
				has_idea = industrial_cooperation_idea
			}
			local_wing_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = local_wing_idea
				}
				has_idea = industrial_cooperation_idea
			}
			strict_regulations_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = strict_regulations_idea
					has_idea = flexible_regulations_idea
				}
				has_idea = constructed_for_life_idea
				has_idea = industrial_cooperation_idea
				has_idea = local_wing_idea
			}
			flexible_regulations_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = strict_regulations_idea
					has_idea = flexible_regulations_idea
				}
				has_idea = constructed_for_life_idea
				has_idea = industrial_cooperation_idea
				has_idea = local_wing_idea
			}
			gardening_partnerships_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = gardening_partnerships_idea
					has_idea = rural_units_idea
				}
				OR = {
					has_idea = strict_regulations_idea
					has_idea = flexible_regulations_idea
				}
			}
			rural_units_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = rural_units_idea
					has_idea = gardening_partnerships_idea
				}
				OR = {
					has_idea = strict_regulations_idea
					has_idea = flexible_regulations_idea
				}
			}
			adversarial_law_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = adversarial_law_idea
					has_idea = fair_competition_codex_idea
				}
				OR = {
					has_idea = rural_units_idea
					has_idea = gardening_partnerships_idea
				}
			}
			fair_competition_codex_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = adversarial_law_idea
					has_idea = fair_competition_codex_idea
				}
				OR = {
					has_idea = rural_units_idea
					has_idea = gardening_partnerships_idea
				}
			}
			outsourcing_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = outsourcing_idea
				}
				OR = {
					has_idea = adversarial_law_idea
					has_idea = fair_competition_codex_idea
				}
			}
			trade_initiative_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = trade_initiative_idea
				}
				has_idea = outsourcing_idea
			}
			GOST_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = GOST_idea
				}
				has_idea = outsourcing_idea
			}
			fullstack_consumtion_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = fullstack_consumtion_idea
				}
				has_idea = outsourcing_idea
			}
			humanism_stronghold_overlay_visible = {
				check_variable = {
					selected_government_system = 1
				}
				NOT = {
					has_idea = humanism_stronghold_idea
				}
				has_idea = trade_initiative_idea
				has_idea = GOST_idea
				has_idea = fullstack_consumtion_idea
			}
		}
		effects = {		
			select_model_button_click = {
				select_menshikov_system = yes
				#for alert
				set_variable = {
					min_reform_points_required = 15
				}
			}
			close_button_click = {
				set_variable = {
					gos_usroistvo = 0
				}
			}
			materials_science_button_click = {
				materials_science_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			dense_layout_button_click = {
				dense_layout_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			lower_streams_button_click = {
				lower_streams_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			upper_streams_button_click = {
				upper_streams_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			our_future_button_click = {
				our_future_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			vocational_technical_schools_button_click = {
				vocational_technical_schools_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			working_faculties_button_click = {
				working_faculties_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			labor_veterans_button_click = {
				labor_veterans_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			labor_heros_button_click = {
				labor_heros_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			industrial_cooperation_button_click = {
				industrial_cooperation_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			constructed_for_life_button_click = {
				constructed_for_life_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			love_thy_neighbour_button_click = {
				love_thy_neighbour_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			local_wing_button_click = {
				local_wing_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			strict_regulations_button_click = {
				strict_regulations_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			flexible_regulations_button_click = {
				flexible_regulations_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			gardening_partnerships_button_click = {
				gardening_partnerships_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			rural_units_button_click = {
				rural_units_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			adversarial_law_button_click = {
				adversarial_law_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			fair_competition_codex_button_click = {
				fair_competition_codex_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			outsourcing_button_click = {
				outsourcing_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 45
				}
			}
			trade_initiative_button_click = {
				trade_initiative_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 60
				}
			}
			GOST_button_click = {
				GOST_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = fullstack_consumtion_idea
					}
					if = {
						limit = {
							has_idea = trade_initiative_idea
						}
						set_variable = {
							min_reform_points_required = 90
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 45
						}
					}
				}
				else = {
					if = {
						limit = {
							has_idea = trade_initiative_idea
						}
						set_variable = {
							min_reform_points_required = 60
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 45
						}
					}
				}
			}
			fullstack_consumtion_button_click = {
				fullstack_consumtion_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = GOST_idea
					}
					if = {
						limit = {
							has_idea = trade_initiative_idea
						}
						set_variable = {
							min_reform_points_required = 90
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 45
						}
					}
				}
				else = {
					if = {
						limit = {
							has_idea = trade_initiative_idea
						}
						set_variable = {
							min_reform_points_required = 60
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 45
						}
					}
				}
			}
			humanism_stronghold_button_click = {
				humanism_stronghold_effect = yes
				set_variable = {
					#turn off alert
					min_reform_points_required = 2147483 #2^31/1000 (.xxx removed)
				}
			}
		}
		ai_enabled = {
			always = yes
		}
		ai_test_interval = 168
		ai_test_variance = 0
		ai_max_weight_taken_per_test = 1
		ai_weights = {
			select_model_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						#select desired ideology
						OR = {
							has_government = free_people
							has_government = technocracy
							has_government = humanists
						}
						add = 100
					}
					modifier = {
						check_variable = {
							selected_government_system > 0
						}
						factor = 0
					}
				}
			}
			materials_science_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						steel < 5
						add = 25
					}
					modifier = {
						steel < 10
						add = 50
					}
					modifier = {
						steel < 15
						add = 75
					}
					modifier = {
						OR = {
							aluminium < 0
							tungsten < 0
							chromium < 0
							rubber < 0
						}
						add = 10
					}
					modifier = {
						OR = {
							aluminium < 5
							tungsten < 5
							chromium < 5
							rubber < 5
						}
						add = 10
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = materials_science_idea
						}
						factor = 0
					}
				}
				
			}
			dense_layout_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = dense_layout_idea
						}
						factor = 0
					}
				}
			}
			lower_streams_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = lower_streams_idea
						}
						factor = 0
					}
				}
			}
			upper_streams_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = upper_streams_idea
						}
						factor = 0
					}
				}
			}
			our_future_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = our_future_idea
						}
						factor = 0
					}
				}
			}
			vocational_technical_schools_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = vocational_technical_schools_idea
						}
						factor = 0
					}
				}
			}
			working_faculties_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						steel < 5
						add = 25
					}
					modifier = {
						steel < 10
						add = 50
					}
					modifier = {
						steel < 15
						add = 75
					}
					modifier = {
						OR = {
							aluminium < 0
							tungsten < 0
							chromium < 0
							rubber < 0
						}
						add = 10
					}
					modifier = {
						OR = {
							aluminium < 5
							tungsten < 5
							chromium < 5
							rubber < 5
						}
						add = 10
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = working_faculties_idea
						}
						factor = 0
					}
				}
			}
			labor_veterans_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = labor_veterans_idea
						}
						factor = 0
					}
				}
			}
			labor_heros_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = labor_heros_idea
						}
						factor = 0
					}
				}
			}
			industrial_cooperation_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = industrial_cooperation_idea
						}
						factor = 0
					}
				}
			}
			constructed_for_life_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = constructed_for_life_idea
						}
						factor = 0
					}
				}
			}
			love_thy_neighbour_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = love_thy_neighbour_idea
						}
						factor = 0
					}
				}
			}
			local_wing_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = local_wing_idea
						}
						factor = 0
					}
				}
			}
			strict_regulations_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = strict_regulations_idea
						}
						factor = 0
					}
				}
			}
			flexible_regulations_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = flexible_regulations_idea
						}
						factor = 0
					}
				}
			}
			gardening_partnerships_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = gardening_partnerships_idea
						}
						factor = 0
					}
				}
			}
			rural_units_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = rural_units_idea
						}
						factor = 0
					}
				}
			}
			adversarial_law_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						add = num_subjects
					}
					modifier = {
						factor = 75
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = adversarial_law_idea
						}
						factor = 0
					}
				}
			}
			fair_competition_codex_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = fair_competition_codex_idea
						}
						factor = 0
					}
				}
			}
			outsourcing_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = outsourcing_idea
						}
						factor = 0
					}
				}
			}
			trade_initiative_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = trade_initiative_idea
						}
						factor = 0
					}
				}
			}
			GOST_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = GOST_idea
						}
						factor = 0
					}
				}
			}
			fullstack_consumtion_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = fullstack_consumtion_idea
						}
						factor = 0
					}
				}
			}
			humanism_stronghold_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = humanism_stronghold_idea
						}
						factor = 0
					}
				}
			}
		}
	}
	smoilov_system_tree = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "smoilov_system_outer_handler"
		visible = {
			check_variable = { 
				gos_usroistvo = 2 
			}
		}		
		triggers = {
			select_model_button_visible = {
				NOT = {
					check_variable = {
						selected_government_system = 2
					}
				}
			}
			select_model_button_click_enabled = {
				set_temp_variable = {
					reform_points_for_upgrade = 20
				}
				goverment_system_can_be_upgraded = yes
				custom_override_tooltip = {
					tooltip = {
						localization_key = population_k_required_tt
						NUM = {
							localization_key = @select_model_min_population_k
						}
					}
					check_variable = {
						max_manpower_k > @select_model_min_population_k
					}
				}
			}
			foundation_of_the_past_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = foundation_of_the_past_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 15
					}
					goverment_system_can_be_upgraded = yes
				}
			}
			behind_the_scenes_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = behind_the_scenes_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 15
					}
					goverment_system_can_be_upgraded = yes
					has_idea = foundation_of_the_past_idea
				}
			}
			without_any_hassle_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = without_any_hassle_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 15
					}
					goverment_system_can_be_upgraded = yes
					has_idea = foundation_of_the_past_idea
				}
			}
			our_home_is_our_fortress_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = our_home_is_our_fortress_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = foundation_of_the_past_idea
				}
			}
			rural_militia_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = rural_militia_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 40
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = industrial_militia_idea
					}
					has_idea = behind_the_scenes_idea
					has_idea = without_any_hassle_idea
					has_idea = our_home_is_our_fortress_idea
				}
			}
			industrial_militia_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = industrial_militia_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 40
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = rural_militia_idea
					}
					has_idea = behind_the_scenes_idea
					has_idea = without_any_hassle_idea
					has_idea = our_home_is_our_fortress_idea
				}
			}
			land_river_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = land_river_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = industrial_militia_idea
				}
			}
			scraping_down_the_bottom_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = scraping_down_the_bottom_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					has_idea = rural_militia_idea
				}
			}
			in_a_blink_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = in_a_blink_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 20
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = land_river_idea
						has_idea = scraping_down_the_bottom_idea
					}
				}
			}
			oprichnina_hand_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = oprichnina_hand_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = in_a_blink_idea
				}
			}
			peripheral_cleansing_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = peripheral_cleansing_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 40
					}
					goverment_system_can_be_upgraded = yes
					has_idea = in_a_blink_idea
				}
			}
			destroy_anomalies_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = destroy_anomalies_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = oprichnina_hand_idea
					has_idea = peripheral_cleansing_idea
				}
			}
			fighting_for_families_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = fighting_for_families_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = destroy_anomalies_idea
				}
			}
			military_loans_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = military_loans_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = destroy_anomalies_idea
				}
			}
			from_stones_and_sticks_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = from_stones_and_sticks_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 30
					}
					goverment_system_can_be_upgraded = yes
					has_idea = destroy_anomalies_idea
				}
			}
			autonomius_bataries_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = autonomius_bataries_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 50
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = controlled_bataries_idea
					}
					has_idea = fighting_for_families_idea
					has_idea = military_loans_idea
					has_idea = from_stones_and_sticks_idea
				}
			}
			controlled_bataries_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = controlled_bataries_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 50
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = autonomius_bataries_idea
					}
					has_idea = fighting_for_families_idea
					has_idea = military_loans_idea
					has_idea = from_stones_and_sticks_idea
				}
			}
			firstborn_of_sparta_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = firstborn_of_sparta_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 50
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = autonomius_bataries_idea
						has_idea = controlled_bataries_idea
					}
				}
			}
			nerves_to_the_limit_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = nerves_to_the_limit_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 50
					}
					goverment_system_can_be_upgraded = yes
					has_idea = firstborn_of_sparta_idea
				}
			}
			steel_grip_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = steel_grip_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 50
					}
					goverment_system_can_be_upgraded = yes
					has_idea = firstborn_of_sparta_idea
				}
			}
			sweat_and_blood_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = sweat_and_blood_idea
						}
						check_variable = {
							selected_government_system = 2
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = 60
					}
					goverment_system_can_be_upgraded = yes
					has_idea = nerves_to_the_limit_idea
					has_idea = steel_grip_idea
				}
			}
			foundation_of_the_past_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = foundation_of_the_past_idea
				}
			}
			behind_the_scenes_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = behind_the_scenes_idea
				}
				has_idea = foundation_of_the_past_idea
			}
			without_any_hassle_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = without_any_hassle_idea
				}
				has_idea = foundation_of_the_past_idea
			}
			our_home_is_our_fortress_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = our_home_is_our_fortress_idea
				}
				has_idea = foundation_of_the_past_idea
			}
			rural_militia_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = rural_militia_idea
					has_idea = industrial_militia_idea
				}
				has_idea = behind_the_scenes_idea
				has_idea = without_any_hassle_idea
				has_idea = our_home_is_our_fortress_idea
			}
			industrial_militia_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = rural_militia_idea
					has_idea = industrial_militia_idea
				}
				has_idea = behind_the_scenes_idea
				has_idea = without_any_hassle_idea
				has_idea = our_home_is_our_fortress_idea
			}
			land_river_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = land_river_idea
				}
				has_idea = industrial_militia_idea
			}
			scraping_down_the_bottom_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = scraping_down_the_bottom_idea
				}
				has_idea = rural_militia_idea
			}
			in_a_blink_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = in_a_blink_idea
				}
				OR = {
					has_idea = land_river_idea
					has_idea = scraping_down_the_bottom_idea
				}
			}
			oprichnina_hand_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = oprichnina_hand_idea
				}
				has_idea = in_a_blink_idea
			}
			peripheral_cleansing_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = peripheral_cleansing_idea
				}
				has_idea = in_a_blink_idea
			}
			destroy_anomalies_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = destroy_anomalies_idea
				}
				has_idea = oprichnina_hand_idea
				has_idea = peripheral_cleansing_idea
			}
			fighting_for_families_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = fighting_for_families_idea
				}
				has_idea = destroy_anomalies_idea
			}
			military_loans_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = military_loans_idea
				}
				has_idea = destroy_anomalies_idea
			}
			from_stones_and_sticks_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = from_stones_and_sticks_idea
				}
				has_idea = destroy_anomalies_idea
			}
			autonomius_bataries_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = autonomius_bataries_idea
					has_idea = controlled_bataries_idea
				}
				has_idea = fighting_for_families_idea
				has_idea = military_loans_idea
				has_idea = from_stones_and_sticks_idea
			}
			controlled_bataries_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = autonomius_bataries_idea
					has_idea = controlled_bataries_idea
				}
				has_idea = fighting_for_families_idea
				has_idea = military_loans_idea
				has_idea = from_stones_and_sticks_idea
			}
			firstborn_of_sparta_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = firstborn_of_sparta_idea
				}
				OR = {
					has_idea = autonomius_bataries_idea
					has_idea = controlled_bataries_idea
				}
			}
			nerves_to_the_limit_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = nerves_to_the_limit_idea
				}
				has_idea = firstborn_of_sparta_idea
			}
			steel_grip_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = steel_grip_idea
				}
				has_idea = firstborn_of_sparta_idea
			}
			sweat_and_blood_overlay_visible = {
				check_variable = {
					selected_government_system = 2
				}
				NOT = {
					has_idea = sweat_and_blood_idea
				}
				has_idea = nerves_to_the_limit_idea
				has_idea = steel_grip_idea
			}
		}
		effects = {
			select_model_button_click = {
				select_smoilov_system = yes
				#for alert
				set_variable = {
					min_reform_points_required = 15
				}
			}
			close_button_click = {
				set_variable = {
					gos_usroistvo = 0
				}
			}
			foundation_of_the_past_button_click = {
				foundation_of_the_past_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 15
				}
			}
			behind_the_scenes_button_click = {
				behind_the_scenes_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = without_any_hassle_idea
					}
					if = {
						limit = {
							has_idea = our_home_is_our_fortress_idea
						}
						set_variable = {
							min_reform_points_required = 40
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 20
						}
					}
				}
				else = {
					set_variable = {
						min_reform_points_required = 15
					}
				}
			}
			without_any_hassle_button_click = {
				without_any_hassle_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = behind_the_scenes_idea
					}
					if = {
						limit = {
							has_idea = our_home_is_our_fortress_idea
						}
						set_variable = {
							min_reform_points_required = 40
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 20
						}
					}
				}
				else = {
					set_variable = {
						min_reform_points_required = 15
					}
				}
			}
			our_home_is_our_fortress_button_click = {
				our_home_is_our_fortress_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = behind_the_scenes_idea
					}
					if = {
						limit = {
							has_idea = without_any_hassle_idea
						}
						set_variable = {
							min_reform_points_required = 40
						}
					}
					else = {
						set_variable = {
							min_reform_points_required = 15
						}
					}
				}
				else = {
					set_variable = {
						min_reform_points_required = 15
					}
				}
			}
			rural_militia_button_click = {
				rural_militia_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			industrial_militia_button_click = {
				industrial_militia_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			land_river_button_click = {
				land_river_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			scraping_down_the_bottom_button_click = {
				scraping_down_the_bottom_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 20
				}
			}
			in_a_blink_button_click = {
				in_a_blink_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			oprichnina_hand_button_click = {
				oprichnina_hand_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = peripheral_cleansing_idea
					}
					set_variable = {
						min_reform_points_required = 30
					}
				}
				else = {
					set_variable = {
						min_reform_points_required = 40
					}
				}
			}
			peripheral_cleansing_button_click = {
				peripheral_cleansing_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			destroy_anomalies_button_click = {
				destroy_anomalies_effect = yes
				#for alert
				set_variable = {
					min_reform_points_required = 30
				}
			}
			fighting_for_families_button_click = {
				fighting_for_families_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = military_loans_idea
						has_idea = from_stones_and_sticks_idea
					}
					set_variable = {
						min_reform_points_required = 50
					}
				}
			}
			military_loans_button_click = {
				military_loans_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = fighting_for_families_idea
						has_idea = from_stones_and_sticks_idea
					}
					set_variable = {
						min_reform_points_required = 50
					}
				}
			}
			from_stones_and_sticks_button_click = {
				from_stones_and_sticks_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = fighting_for_families_idea
						has_idea = military_loans_idea
					}
					set_variable = {
						min_reform_points_required = 50
					}
				}
			}
			autonomius_bataries_button_click = {
				autonomius_bataries_effect = yes
				#inherit 50 points alert
			}
			controlled_bataries_button_click = {
				controlled_bataries_effect = yes
				#inherit 50 points alert
			}
			firstborn_of_sparta_button_click = {
				firstborn_of_sparta_effect = yes
				#inherit 50 points alert
			}
			nerves_to_the_limit_button_click = {
				nerves_to_the_limit_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = steel_grip_idea
					}
					set_variable = {
						min_reform_points_required = 60
					}
				}
				#else: inherit 50 points alert
			}
			steel_grip_button_click = {
				steel_grip_effect = yes
				#for alert
				if = {
					limit = {
						has_idea = nerves_to_the_limit_idea
					}
					set_variable = {
						min_reform_points_required = 60
					}
				}
				#else: inherit 50 points alert
			}
			sweat_and_blood_button_click = {
				sweat_and_blood_effect = yes
				set_variable = {
					#turn off alert
					min_reform_points_required = 2147483 #2^31/1000 (.xxx removed)
				}
			}
		}
		ai_enabled = {
			always = yes
		}
		ai_test_interval = 168
		ai_test_variance = 0
		ai_max_weight_taken_per_test = 1
		ai_weights = {
			select_model_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						#select desired ideology
						OR = {
							has_government = statesmen
							has_government = militarists
							has_government = bandits
						}
						add = 100
					}
					modifier = {
						check_variable = {
							selected_government_system > 0
						}
						factor = 0
					}
				}
			}
			foundation_of_the_past_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = foundation_of_the_past_idea
						}
						factor = 0
					}
				}
			}
			behind_the_scenes_button_click = {
				ai_will_do = {
					base = 50
					modifier = {
						has_idea = without_any_hassle_idea
						add = 100
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = behind_the_scenes_idea
						}
						factor = 0
					}
				}
			}
			without_any_hassle_button_click = {
				#we need reform_points go brrrrrrrr!
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = without_any_hassle_idea
						}
						factor = 0
					}
				}
			}
			our_home_is_our_fortress_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						has_idea = without_any_hassle_idea
						add = 100
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = our_home_is_our_fortress_idea
						}
						factor = 0
					}
				}
			}
			rural_militia_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						add = ai_wants_divisions
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = rural_militia_idea
						}
						factor = 0
					}
				}
			}
			industrial_militia_button_click = {
				ai_will_do = {
					base = 50
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = industrial_militia_idea
						}
						factor = 0
					}
				}
			}
			land_river_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = land_river_idea
						}
						factor = 0
					}
				}
			}
			scraping_down_the_bottom_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = scraping_down_the_bottom_idea
						}
						factor = 0
					}
				}
			}
			in_a_blink_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = in_a_blink_idea
						}
						factor = 0
					}
				}
			}
			oprichnina_hand_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						check_variable = {
							surrender_progress > 0.5
						}
						factor = 1.5
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = oprichnina_hand_idea
						}
						factor = 0
					}
				}
			}
			peripheral_cleansing_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						add = ai_wants_divisions
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = peripheral_cleansing_idea
						}
						factor = 0
					}
				}
			}
			destroy_anomalies_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = destroy_anomalies_idea
						}
						factor = 0
					}
				}
			}
			fighting_for_families_button_click = {
				ai_will_do = {
					base = 50
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = fighting_for_families_idea
						}
						factor = 0
					}
				}
			}
			military_loans_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						has_war = yes
						factor = 1.5
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = military_loans_idea
						}
						factor = 0
					}
				}
			}
			from_stones_and_sticks_button_click = {
				ai_will_do = {
					base = 10
					modifier = {
						steel < 5
						add = 25
					}
					modifier = {
						steel < 10
						add = 50
					}
					modifier = {
						steel < 15
						add = 75
					}
					modifier = {
						OR = {
							aluminium < 0
							tungsten < 0
							chromium < 0
							rubber < 0
						}
						add = 10
					}
					modifier = {
						OR = {
							aluminium < 5
							tungsten < 5
							chromium < 5
							rubber < 5
						}
						add = 10
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = from_stones_and_sticks_idea
						}
						factor = 0
					}
				}
			}
			autonomius_bataries_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = autonomius_bataries_idea
						}
						factor = 0
					}
				}
			}
			controlled_bataries_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						has_defensive_war = yes
						factor = 3
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = controlled_bataries_idea
						}
						factor = 0
					}
				}
			}
			firstborn_of_sparta_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = firstborn_of_sparta_idea
						}
						factor = 0
					}
				}
			}
			nerves_to_the_limit_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = nerves_to_the_limit_idea
						}
						factor = 0
					}
				}
			}
			steel_grip_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						has_war = yes
						factor = 2
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = steel_grip_idea
						}
						factor = 0
					}
				}
			}
			sweat_and_blood_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = sweat_and_blood_idea
						}
						factor = 0
					}
				}
			}
		}
	}
	naumov_system_tree = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = "naumov_system_outer_handler"
		visible = {
			check_variable = { 
				gos_usroistvo = 3
			}
		}		
		triggers = {			
			select_model_button_visible = {
				NOT = {
					check_variable = {
						selected_government_system = 3
					}
				}
			}
			select_model_button_click_enabled = {
				set_temp_variable = {
					reform_points_for_upgrade = constant:government_upgrade_cost.paltry
				}
				goverment_system_can_be_upgraded = yes
				custom_override_tooltip = {
					tooltip = {
						localization_key = population_k_required_tt
						NUM = {
							localization_key = @select_model_min_population_k
						}
					}
					check_variable = {
						max_manpower_k > @select_model_min_population_k
					}
				}
			}
			common_duty_common_law_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = common_duty_common_law_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
				}
			}
			existence_essence_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = existence_essence_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = existence_horror_idea
					}
					has_idea = common_duty_common_law_idea
				}
			}
			existence_horror_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = existence_horror_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = existence_essence_idea
					}
					has_idea = common_duty_common_law_idea
				}
			}
			caring_eye_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = caring_eye_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = interesting_observation_idea
					}
					has_idea = existence_essence_idea
				}
			}
			interesting_observation_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = interesting_observation_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = caring_eye_idea
					}
					has_idea = existence_essence_idea
				}
			}
			technological_revolution_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = technological_revolution_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = cultural_revolution_idea
					}
					has_idea = existence_horror_idea
				}
			}
			cultural_revolution_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = cultural_revolution_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					NOT = {
						has_idea = technological_revolution_idea
					}
					has_idea = existence_horror_idea
				}
			}
			assured_survival_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = assured_survival_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = caring_eye_idea
						has_idea = interesting_observation_idea
					}
				}
			}
			proportionate_fee_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = proportionate_fee_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = technological_revolution_idea
						has_idea = cultural_revolution_idea
					}
				}
			}
			flawless_soldier_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = flawless_soldier_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					OR = {
						has_idea = assured_survival_idea
						has_idea = proportionate_fee_idea
					}
				}
			}
			all_describing_formula_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = all_describing_formula_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.high
					}
					goverment_system_can_be_upgraded = yes
					has_idea = flawless_soldier_idea
				}
			}
			primary_broth_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = primary_broth_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					has_idea = flawless_soldier_idea
				}
			}
			flowers_of_life_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = flowers_of_life_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					has_idea = all_describing_formula_idea
					has_idea = primary_broth_idea
				}
			}
			their_life_plans_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = their_life_plans_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					has_idea = flowers_of_life_idea
				}
			}
			cast_aside_doubts_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = cast_aside_doubts_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					has_idea = their_life_plans_idea
				}
			}
			potential_realization_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = potential_realization_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					has_idea = their_life_plans_idea
				}
			}
			order_in_mind_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = order_in_mind_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.huge
					}
					goverment_system_can_be_upgraded = yes
					has_idea = cast_aside_doubts_idea
				}
			}
			unity_by_blood_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = unity_by_blood_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_paltry
					}
					goverment_system_can_be_upgraded = yes
					has_idea = potential_realization_idea
				}
			}
			man_and_consciousness_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = man_and_consciousness_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_low
					}
					goverment_system_can_be_upgraded = yes
					has_idea = unity_by_blood_idea
				}
			}
			cognitive_warfare_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = cognitive_warfare_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.huge
					}
					goverment_system_can_be_upgraded = yes
					has_idea = order_in_mind_idea
				}
			}
			body_limits_button_click_enabled = {
				if = {
					limit = {
						NOT = {
							has_idea = body_limits_idea
						}
						check_variable = {
							selected_government_system = 3
						}
					}
					set_temp_variable = {
						reform_points_for_upgrade = constant:government_upgrade_cost.very_huge
					}
					goverment_system_can_be_upgraded = yes
					has_idea = cognitive_warfare_idea
					has_idea = man_and_consciousness_idea
				}
			}
			common_duty_common_law_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = common_duty_common_law_idea
				}
			}
			existence_essence_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = existence_essence_idea
					has_idea = existence_horror_idea
				}
				has_idea = common_duty_common_law_idea
			}
			existence_horror_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = existence_essence_idea
					has_idea = existence_horror_idea
				}
				has_idea = common_duty_common_law_idea
			}
			caring_eye_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = caring_eye_idea
					has_idea = interesting_observation_idea
				}
				has_idea = existence_essence_idea
			}
			interesting_observation_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = caring_eye_idea
					has_idea = interesting_observation_idea
				}
				has_idea = existence_essence_idea
			}
			technological_revolution_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = technological_revolution_idea
					has_idea = cultural_revolution_idea
				}
				has_idea = existence_horror_idea
			}
			cultural_revolution_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = technological_revolution_idea
					has_idea = cultural_revolution_idea
				}
				has_idea = existence_horror_idea
			}
			assured_survival_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = assured_survival_idea
				}
				OR = {
					has_idea = caring_eye_idea
					has_idea = interesting_observation_idea
				}
			}
			proportionate_fee_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = proportionate_fee_idea
				}
				OR = {
					has_idea = technological_revolution_idea
					has_idea = cultural_revolution_idea
				}
			}
			flawless_soldier_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = flawless_soldier_idea
				}
				OR = {
					has_idea = assured_survival_idea
					has_idea = proportionate_fee_idea
				}
			}
			all_describing_formula_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = all_describing_formula_idea
				}
				has_idea = flawless_soldier_idea
			}
			primary_broth_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = primary_broth_idea
				}
				has_idea = flawless_soldier_idea
			}
			flowers_of_life_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = flowers_of_life_idea
				}
				has_idea = all_describing_formula_idea
				has_idea = primary_broth_idea
			}
			their_life_plans_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = their_life_plans_idea
				}
				has_idea = flowers_of_life_idea
			}
			cast_aside_doubts_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = cast_aside_doubts_idea
				}
				has_idea = their_life_plans_idea
			}
			potential_realization_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = potential_realization_idea
				}
				has_idea = their_life_plans_idea
			}
			order_in_mind_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = order_in_mind_idea
				}
				has_idea = cast_aside_doubts_idea
			}
			unity_by_blood_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = unity_by_blood_idea
				}
				has_idea = potential_realization_idea
			}
			man_and_consciousness_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = man_and_consciousness_idea
				}
				has_idea = unity_by_blood_idea
			}
			cognitive_warfare_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = cognitive_warfare_idea
				}
				has_idea = order_in_mind_idea
			}
			body_limits_overlay_visible = {
				check_variable = {
					selected_government_system = 3
				}
				NOT = {
					has_idea = body_limits_idea
				}
				has_idea = man_and_consciousness_idea
				has_idea = cognitive_warfare_idea
			}
		}
		effects = {		
			select_model_button_click = {
				select_naumov_system = yes
			}
			close_button_click = {
				set_variable = {
					gos_usroistvo = 0
				}
			}
			common_duty_common_law_button_click = {
				common_duty_common_law_effect = yes
			}
			existence_essence_button_click = {
				existence_essence_effect = yes
			}
			existence_horror_button_click = {
				existence_horror_effect = yes
			}
			caring_eye_button_click = {
				caring_eye_effect = yes
			}
			interesting_observation_button_click = {
				interesting_observation_effect = yes
			}
			technological_revolution_button_click = {
				technological_revolution_effect = yes
			}
			cultural_revolution_button_click = {
				cultural_revolution_effect = yes
			}
			assured_survival_button_click = {
				assured_survival_effect = yes
			}
			proportionate_fee_button_click = {
				proportionate_fee_effect = yes
			}
			flawless_soldier_button_click = {
				flawless_soldier_effect = yes
			}
			all_describing_formula_button_click = {
				all_describing_formula_effect = yes
			}
			primary_broth_button_click = {
				primary_broth_effect = yes
			}
			flowers_of_life_button_click = {
				flowers_of_life_effect = yes
			}
			their_life_plans_button_click = {
				their_life_plans_effect = yes
			}
			cast_aside_doubts_button_click = {
				cast_aside_doubts_effect = yes
			}
			potential_realization_button_click = {
				potential_realization_effect = yes
			}
			order_in_mind_button_click = {
				order_in_mind_effect = yes
			}
			unity_by_blood_button_click = {
				unity_by_blood_effect = yes
			}
			man_and_consciousness_button_click = {
				man_and_consciousness_effect = yes
			}
			cognitive_warfare_button_click = {
				cognitive_warfare_effect = yes
			}
			body_limits_button_click = {
				body_limits_effect = yes
			}
		}
		ai_enabled = {
			always = yes
		}
		ai_test_interval = 168
		ai_test_variance = 0
		ai_max_weight_taken_per_test = 1
		ai_weights = {
			select_model_button_click = {
				ai_will_do = {
					base = 0
					modifier = {
						#select desired ideology
						OR = {
							has_government = chthonism
							has_government = sacraments
						}
						add = 100
					}
					modifier = {
						check_variable = {
							selected_government_system > 0
						}
						factor = 0
					}
				}
			}
			common_duty_common_law_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = common_duty_common_law_idea
						}
						factor = 0
					}
				}
			}
			existence_essence_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						#this branch will grand a lot of stability
						has_stability < 0.3
						factor = 4
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = existence_essence_idea
						}
						factor = 0
					}
				}
			}
			existence_horror_button_click = {
				ai_will_do = {
					base = 200
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = existence_horror_idea
						}
						factor = 0
					}
				}
			}
			caring_eye_button_click = {
				ai_will_do = {
					base = 200
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = caring_eye_idea
						}
						factor = 0
					}
				}
			}
			interesting_observation_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = interesting_observation_idea
						}
						factor = 0
					}
				}
			}
			technological_revolution_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = technological_revolution_idea
						}
						factor = 0
					}
				}
			}
			cultural_revolution_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						#this will grand a stability & war support
						OR = {
							has_stability < 0.3
							has_war_support < 0.3
						}
						factor = 4
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = cultural_revolution_idea
						}
						factor = 0
					}
				}
			}
			assured_survival_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = assured_survival_idea
						}
						factor = 0
					}
				}
			}
			proportionate_fee_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = proportionate_fee_idea
						}
						factor = 0
					}
				}
			}
			flawless_soldier_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = flawless_soldier_idea
						}
						factor = 0
					}
				}
			}
			all_describing_formula_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = all_describing_formula_idea
						}
						factor = 0
					}
				}
			}
			primary_broth_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						steel < 5
						add = 25
					}
					modifier = {
						steel < 10
						add = 50
					}
					modifier = {
						steel < 15
						add = 75
					}
					modifier = {
						OR = {
							aluminium < 0
							tungsten < 0
							chromium < 0
							rubber < 0
						}
						add = 10
					}
					modifier = {
						OR = {
							aluminium < 5
							tungsten < 5
							chromium < 5
							rubber < 5
						}
						add = 10
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = primary_broth_idea
						}
						factor = 0
					}
				}
			}
			flowers_of_life_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = flowers_of_life_idea
						}
						factor = 0
					}
				}
			}
			their_life_plans_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = their_life_plans_idea
						}
						factor = 0
					}
				}
			}
			cast_aside_doubts_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						#this will grand a stability & war support
						OR = {
							has_stability < 0.3
							has_war_support < 0.3
						}
						factor = 4
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = cast_aside_doubts_idea
						}
						factor = 0
					}
				}
			}
			potential_realization_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = potential_realization_idea
						}
						factor = 0
					}
				}
			}
			order_in_mind_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						has_war = yes
						factor = 4
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = order_in_mind_idea
						}
						factor = 0
					}
				}
			}
			unity_by_blood_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = unity_by_blood_idea
						}
						factor = 0
					}
				}
			}
			man_and_consciousness_button_click = {
				#TODO: May have more complicated logic, but development is linear
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = man_and_consciousness_idea
						}
						factor = 0
					}
				}
			}
			cognitive_warfare_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						has_war = yes
						factor = 4
					}
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = cognitive_warfare_idea
						}
						factor = 0
					}
				}
			}
			body_limits_button_click = {
				ai_will_do = {
					base = 100
					modifier = {
						OR = {
							check_variable = {
								selected_government_system = 0
							}
							has_idea = body_limits_idea
						}
						factor = 0
					}
				}
			}
		}
	}
}